$(".typaoke").attr("tabindex","0");let html="",lines=$(".typaoke_content").text().trim().split("\n").map((e=>e.trim().split(""))),charCount=0;for(let e=0;e<lines.length;e++){for(let t=0;t<lines[e].length;t++)html+='<span class="typaoke_untyped" id="typaoke_'+charCount+++'">'+lines[e][t]+"</span>";html+="<br>"}$(".typaoke").html(html);let index=0,typaokeReachedEnd=!1,characters=lines.flat();$(".typaoke").keypress((e=>{"\n"==characters[index]&&index++," "==String.fromCharCode(e.which)&&e.preventDefault(),index<characters.length&&String.fromCharCode(e.which)==characters[index]&&$("#typaoke_"+index++).attr("class","typaoke_typed"),index>=characters.length&&(typaokeReachedEnd=!0)})),$(".typaoke").keydown((e=>{index>0&&8==e.which&&$("#typaoke_"+--index).attr("class","typaoke_untyped")}));